## Infrastructure vs Application Deployment Separation

There are two distinct deployment phases that should be documented in separate README files.

### Phase 1: Infrastructure Deployment

Use the automated deployment script (deploy-infra/deploy.ps1) which handles everything:

1. Validates Azure CLI login and retrieves user credentials automatically
2. Creates the resource group
3. Deploys all Bicep templates
4. Waits for SQL Server to be ready
5. Configures firewall rules
6. Imports database schema and stored procedures
7. Sets up managed identity with database permissions
8. Configures App Service settings

Alternatively, manual steps are documented in deploy-infra/README.md.

### Phase 2: Application Deployment

This is completely separate and assumes infrastructure already exists. See deploy-app/README.md for instructions on building and deploying the application code.

### Bicep Guidelines

Use uniqueString(resourceGroup().id) to generate deterministic unique names for resources. Never use timestamps like utcNow() in variable declarations as this is not allowed in Bicep.

Key considerations for Bicep templates:

- The utcNow() function can only be used as a parameter default value, not in variable declarations
- Conditional module outputs must use null-safe operators (?. and ??) to prevent errors when optional modules are not deployed
- All resource names should be lowercase to comply with Azure naming requirements
- Do not configure diagnostic settings at the SQL Server level as categories like SQLSecurityAuditEvents are not supported - only configure diagnostics at the database level
