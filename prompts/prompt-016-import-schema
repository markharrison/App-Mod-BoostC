Use sqlcmd (the modern go-sqlcmd tool) for all database operations including schema import and user configuration.

Do not use Python scripts for SQL execution. The sqlcmd tool handles GO batch separators natively and supports Entra ID authentication.

Database operations to include in the deployment script:

1. Import the database schema from the Database-Schema folder
2. Create a database user for the managed identity using CREATE USER FROM EXTERNAL PROVIDER
3. Grant the managed identity the db_datareader and db_datawriter roles
4. Grant EXECUTE permission so the managed identity can call stored procedures
5. Import stored procedures from stored-procedures.sql

Use sqlcmd with --authentication-method=ActiveDirectoryDefault for Entra ID authentication. The older -G flag is deprecated in the modern go-sqlcmd tool.

To install sqlcmd on Windows: winget install sqlcmd

Use PowerShell variable expansion directly in sqlcmd commands rather than creating separate SQL script files that require text substitution.


